<section class="max-w-xl mx-auto px-4 py-10 text-center">
    <h1 class="text-3xl font-bold mb-2">Get $5 Off Your First Order!</h1>
    <p class="text-gray-600 mb-6">Sign up for exclusive offers and get your instant coupon via email.</p>

    <form id="couponForm" class="space-y-4">
        <input type="text" name="firstName" placeholder="First Name" required class="w-full p-3 border rounded" />
        <input type="text" name="lastName" placeholder="Last Name" required class="w-full p-3 border rounded" />
        <input type="email" name="email" placeholder="Email" required class="w-full p-3 border rounded" />
        <input type="tel" name="phone" placeholder="Phone Number" required class="w-full p-3 border rounded" />

        <label class="block text-left text-sm">
            <input type="checkbox" name="smsConsent" required class="mr-2" />
            I agree to receive promotional SMS messages from Karry Kraze.
        </label>
        <label class="block text-left text-sm">
            <input type="checkbox" name="emailConsent" required class="mr-2" />
            I agree to receive marketing emails from Karry Kraze.
        </label>

        <button type="submit" class="bg-black text-white px-6 py-2 rounded hover:bg-gray-800">Submit</button>
    </form>

    <div id="couponMessage" class="hidden mt-6">
        <p class="text-lg font-semibold text-green-700 mb-4">🎉 Your coupon is on the way! Check your inbox.</p>
        <a href="/products/catalog.html" class="inline-block bg-red-600 text-white px-4 py-2 rounded">Use Now</a>
    </div>
</section>

<script>
  document.getElementById('couponForm').addEventListener('submit', async function(e) {
    e.preventDefault();

    const form = e.target;
    const data = Object.fromEntries(new FormData(form).entries());

    const res = await fetch('https://hook.us2.make.com/mebf3tl39n3o3gx11ywaeta6f7eo1yja', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });

    if (res.ok) {
      form.style.display = 'none';
      document.getElementById('couponMessage').classList.remove('hidden');
    } else {
      alert('Something went wrong. Please try again.');
    }
  });
</script>
