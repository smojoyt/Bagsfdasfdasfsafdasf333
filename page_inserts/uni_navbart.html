<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Karry Kraze Navbar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .navbar-hide {
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }

        .navbar-show {
            transform: translateY(0);
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="pt-16">

    <!-- Announcement Bar -->
    <div class="w-full bg-yellow-100 text-center text-sm font-semibold text-gray-800 py-2 px-4">
        🎉 FREE SHIPPING on all U.S. orders over $50! Limited time only.
    </div>

    <!-- Navbar -->
    <nav id="mainNavbar" class="navbar-show bg-white shadow-md fixed top-0 w-full z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">

                <!-- Left: Hamburger for mobile -->
                <div class="flex items-center md:hidden">
                    <button id="mobile-menu-button" class="text-gray-800 text-2xl focus:outline-none">
                        ☰
                    </button>
                </div>

                <!-- Center: Logo -->
                <div class="flex-1 flex justify-center">
                    <a href="/" class="flex items-center">
                        <img src="/imgs/Logo/Long/LL_Black_01.png" alt="Karry Kraze Logo" class="h-10 w-auto" />
                    </a>
                </div>

                <!-- Right: Cart icon -->
                <div class="flex items-center">
                    <button class="snipcart-checkout relative text-xl">
                        🛒
                        <span id="cart-count" class="absolute -top-2 -right-3 bg-black text-white text-xs rounded-full px-1">0</span>
                    </button>
                </div>
            </div>

            <!-- Desktop Nav (below logo for clarity & layout) -->
            <div class="hidden md:flex justify-center space-x-6 items-center py-2">
                <a href="/" class="text-gray-600 hover:text-black">Home</a>
                <a href="https://catalog.karrykraze.com" target="_blank" class="text-gray-600 hover:text-black">Catalog</a>
                <a href="https://www.instagram.com/karrykraze/" target="_blank" class="text-gray-600 hover:text-black">Instagram</a>
                <a href="/contact" target="_blank" class="text-gray-600 hover:text-black">Contact</a>
            </div>
        </div>

        <!-- Mobile Dropdown -->
        <div id="mobile-menu" class="md:hidden hidden flex flex-col gap-2 px-4 pb-4 pt-2 bg-white shadow-md z-40 w-full">
            <a href="/" class="text-gray-600 hover:text-black">Home</a>
            <a href="https://catalog.karrykraze.com" target="_blank" class="text-gray-600 hover:text-black">Catalog</a>
            <a href="https://www.instagram.com/karrykraze/" target="_blank" class="text-gray-600 hover:text-black">Instagram</a>
            <a href="/contact" target="_blank" class="text-gray-600 hover:text-black">Contact</a>
        </div>
    </nav>


    <!-- Script for Navbar Behavior -->
    <script>
        function initNavbar() {
            // Mobile menu toggle
            const toggleBtn = document.getElementById("mobile-menu-button");
            const menu = document.getElementById("mobile-menu");
            if (toggleBtn && menu) {
                toggleBtn.addEventListener("click", () => {
                    menu.classList.toggle("hidden");
                });
            }

            // Update cart count from localStorage
            const cart = JSON.parse(localStorage.getItem("savedCart")) || [];
            const totalQty = cart.reduce((sum, item) => sum + (item.qty || 1), 0);
            const countElem = document.getElementById("cart-count");
            if (countElem) countElem.textContent = totalQty;

            // Auto-hide navbar on scroll down
            const navbar = document.getElementById("mainNavbar");
            let lastScrollY = window.scrollY;
            window.addEventListener("scroll", () => {
                if (!navbar) return;
                if (window.scrollY > lastScrollY && window.scrollY > 50) {
                    navbar.classList.replace("navbar-show", "navbar-hide");
                } else {
                    navbar.classList.replace("navbar-hide", "navbar-show");
                }
                lastScrollY = window.scrollY;
            });
        }

        // Run navbar setup
        window.addEventListener("DOMContentLoaded", initNavbar);
    </script>

</body>
</html>
